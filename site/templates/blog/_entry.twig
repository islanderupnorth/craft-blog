{% extends '_layout' %}

{# Set parameters for prev/next elements list #}
{% set params = craft.entries.section('blog').order('postDate desc, id asc') %}

{# Get the prev/next elements #}
{% set prevEntry = entry.getPrev(params) %}
{% set nextEntry = entry.getNext(params) %}

{% block main %}
  {# Prev Entry #}
  {% if prevEntry %}
    <div class="fixed prev-button">
      <a href="{{ prevEntry.slug }}">
        <div>{{ prevEntry.title }}</div>
        <div>{{ prevEntry.postDate | date("M d, Y") }}</div>
      </a>
    </div>
  {% endif %}
  {# Next Entry #}
  {% if nextEntry %}
    <div class="fixed next-button">
      <a href="{{ nextEntry.slug }}">
        <div>{{ nextEntry.title }}</div>
        <div>{{ nextEntry.postDate | date("M d, Y") }}</div>
      </a>
    </div>
  {% endif %}
  {# Google Maps #}
  {% if entry.city and entry.country %}
    <div class="fixed bottom-right">
      <div class="blog-location">
        <a href="https://www.google.com/maps/place/{{ entry.city }},{{ entry.country }}/" target="_blank">
        <i class="fas fa-map-marker"></i>{{ entry.city }}, {{ entry.country }}
        </a>
      </div>
    </div>
  {% endif %}
  {# Matrix Modules #}
  <div class="blog-post">
    <div class="blog-date">{{ entry.postDate | date("M d, Y") }}</div>
    <h1 class="blog-title">{{ entry.title }}</h1>
    {% for block in entry.modules %}
      {% include ('blog/_partials/_' ~ block.type.handle) %}
    {% endfor %}
  </div>
{% endblock %}
